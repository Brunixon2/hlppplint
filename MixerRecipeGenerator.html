<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <title>Mixing Create Mod Generator Made By Brunixon.2</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 20px;
      background: #1e1e1e;
      color: #7300c0;
    }
    .top-image {
      display: block;
      margin: 0 auto 20px;
      max-width: 200px; /* opcjonalne zmniejszenie */
    }
    .block {
      margin-bottom: 20px;
      padding: 10px;
      border: 1px solid #6800a5;
      border-radius: 10px;
    }
    input[type="text"], input[type="number"] {
      margin: 5px 0;
      padding: 5px;
      width: 100%;
      background: #474747;
      color: #cfcfcf;
    }
    button {
      margin: 10px 5px 0 0;
      padding: 5px 10px;
      background: #1e1e1e;
      color: #00c25e;
      border: 1px solid #00c25e;
      border-radius: 5px;
      cursor: pointer;
    }
    .fluid-amount {
      display: none;
    }
    textarea {
      width: 100%;
      height: 300px;
      margin-top: 20px;
      background: #000000;
      color: #0f0;
      padding: 10px;
      border: 1px solid #00a70e;
      border-radius: 10px;
    }
    .output-controls {
      margin-top: 10px;
      display: flex;
      gap: 10px;
      align-items: center;
    }
    .output-controls input {
      width: auto;
    }
  </style>
</head>
<body>

  <!-- ✅ OBRAZEK NA SAMEJ GÓRZE STRONY -->
  <img class="top-image" src="https://static.wikia.nocookie.net/create_mod/images/e/eb/Mechanical_Mixer.png/revision/latest/scale-to-width-down/268?cb=20230528205454" 
       alt="Mechanical_Mixer" />

  <h1>Mixing Create Mod Generator Made By Brunixon.2</h1>

  <div class="block" id="input1">
    <h3>Ingredient 1</h3>
    <input type="text" placeholder="Item / Fluid" class="input-value">
    <div class="fluid-amount">
      <input type="number" placeholder="Fluid Amount" class="amount-value">
    </div>
    <button class="toggle-type">Mode: item</button>
  </div>

  <div class="block" id="input2">
    <h3>Ingredient 2</h3>
    <input type="text" placeholder="Item / Fluid" class="input-value">
    <div class="fluid-amount">
      <input type="number" placeholder="Fluid Amount" class="amount-value">
    </div>
    <button class="toggle-type">Mode: item</button>
  </div>

  <div class="block" id="output">
    <h3>Output</h3>
    <input type="text" placeholder="Item / Fluid" class="input-value">
    <div class="fluid-amount">
      <input type="number" placeholder="Fluid Amount" class="amount-value">
    </div>
    <button class="toggle-type">Mode: item</button>
  </div>

  <button onclick="generateJSON()">Create</button>

  <textarea id="outputJSON" readonly></textarea>

  <div class="output-controls">
    <label for="fileNumber">Number ID:</label>
    <input type="number" id="fileNumber" placeholder="np. 1">
    <button onclick="downloadJSON()">Download JSON</button>
  </div>

  <script>
    function toggleMode(block) {
      const button = block.querySelector('.toggle-type');
      const fluidAmount = block.querySelector('.fluid-amount');
      if (button.textContent.includes('item')) {
        button.textContent = 'Mode: fluid';
        fluidAmount.style.display = 'block';
      } else {
        button.textContent = 'Mode: item';
        fluidAmount.style.display = 'none';
      }
    }

    document.querySelectorAll('.toggle-type').forEach(btn => {
      btn.addEventListener('click', () => {
        toggleMode(btn.closest('.block'));
      });
    });

    function getInputData(block) {
      const type = block.querySelector('.toggle-type').textContent.includes('fluid') ? 'fluid' : 'item';
      const value = block.querySelector('.input-value').value.trim();
      const amountInput = block.querySelector('.amount-value');
      const amount = amountInput && amountInput.closest('.fluid-amount').style.display !== 'none' ? parseInt(amountInput.value) : null;
      return { type, value, amount };
    }

    function generateJSON() {
      const input1 = getInputData(document.getElementById('input1'));
      const input2 = getInputData(document.getElementById('input2'));
      const output = getInputData(document.getElementById('output'));

      const recipe = {
        type: "create:mixing",
        ingredients: [input1, input2].map(ing => {
          if (ing.type === 'item') {
            return { item: ing.value };
          } else {
            return { amount: ing.amount || 1, fluid: ing.value, nbt: {} };
          }
        }),
        results: [
          output.type === 'item'
            ? { item: output.value }
            : { amount: output.amount || 1, fluid: output.value, nbt: {} }
        ]
      };

      document.getElementById('outputJSON').value = JSON.stringify(recipe, null, 2);
    }

    function downloadJSON() {
      const number = document.getElementById('fileNumber').value.trim();
      if (!number) {
        alert("Give ID name!");
        return;
      }

      const data = document.getElementById('outputJSON').value;
      const blob = new Blob([data], { type: "application/json" });
      const url = URL.createObjectURL(blob);

      const link = document.createElement("a");
      link.href = url;
      link.download = `mixerRecipe(${number}).json`;
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
      URL.revokeObjectURL(url);
    }
  </script>
</body>
</html>
